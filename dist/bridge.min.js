!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.bridge=t()}}(function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return i(n?n:t)},d,d.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";e.exports=t("./lib/bridge")},{"./lib/bridge":4}],2:[function(t,e,n){"use strict";function r(t){this.bids=[],this.dealer=t}var i=t("./bid"),o=t("./contract");r.prototype.bid=function(t){var e,n,r=this;if(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),Array.isArray(t))return void t.forEach(function(t){r.bid(t)});if(("string"==typeof t||t instanceof String)&&(t=i[t]),"object"!=typeof t||"Bid"!==Object.getPrototypeOf(t).constructor.name)throw new Error("Invalid bid");if(this.isClosed())throw new Error("Bidding not allowed, auction is closed");if(t.isPass);else if(t.isDouble){if(e=this.nextSeatToBid(),n=this.contract(),void 0===n.declaror)throw new Error("Cannot double when opposition has no contract");if(n.declaror===e.partner)throw new Error("Doubling your partner is not allowed");if(""!==n.risk)throw new Error("Opposition is already at risk")}else if(t.isRedouble){if(e=this.nextSeatToBid(),n=this.contract(),"X"!==n.risk||e!==n.declaror&&e.partner!==n.declaror)throw new Error("Invalid bid")}else{var o=this.bids.some(function(e){return e.order>t.order});if(o)throw new Error("Insufficient bid")}this.bids.push(t)},r.prototype.isClosed=function(){return!(this.bids.length<4)&&this.bids.slice(-3).every(function(t){return t===i.pass})},r.prototype.nextSeatToBid=function(){return this.isClosed()?null:this.bids.reduce(function(t){return t.next},this.dealer)},r.prototype.contract=function(){var t=this.dealer,e=this.bids.reduce(function(e,n){return n.isPass||(n.isDouble?e.risk="X":n.isRedouble?e.risk="XX":(e.risk="",e.level=n.level,e.denomination=n.denomination,e.declaror=t)),t=t.next,e},new o);if(e.declaror){t=this.dealer;for(var n=0;n<this.bids.length;n++){var r=this.bids[n];if(r.denomination===e.denomination&&(t===e.declaror||t===e.declaror.partner)){e.declaror=t;break}t=t.next}}return e},e.exports=r},{"./bid":3,"./contract":6}],3:[function(t,e,n){"use strict";function r(t){this.level=+t.charAt(0)||void 0,this.denomination=this.level?t.substr(1):void 0,this.order=5*(this.level-1)+i[this.denomination],this.isDouble="X"===t,this.isRedouble="XX"===t,this.isPass="-"===t||"P"===t||"/"===t||"Pass"===t,this.isRed="H"===this.denomination||"D"===this.denomination,this.isBlack="S"===this.denomination||"C"===this.denomination}var i={C:1,D:2,H:3,S:4,NT:5};r.prototype.toString=function(){return this.isPass?"-":this.isDouble?"X":this.isRedouble?"XX":this.level+this.denomination};var o={"-":new r("-"),X:new r("X"),XX:new r("XX"),"1C":new r("1C"),"1D":new r("1D"),"1H":new r("1H"),"1S":new r("1S"),"1NT":new r("1NT"),"2C":new r("2C"),"2D":new r("2D"),"2H":new r("2H"),"2S":new r("2S"),"2NT":new r("2NT"),"3C":new r("3C"),"3D":new r("3D"),"3H":new r("3H"),"3S":new r("3S"),"3NT":new r("3NT"),"4C":new r("4C"),"4D":new r("4D"),"4H":new r("4H"),"4S":new r("4S"),"4NT":new r("4NT"),"5C":new r("5C"),"5D":new r("5D"),"5H":new r("5H"),"5S":new r("5S"),"5NT":new r("5NT"),"6C":new r("6C"),"6D":new r("6D"),"6H":new r("6H"),"6S":new r("6S"),"6NT":new r("6NT"),"7C":new r("7C"),"7D":new r("7D"),"7H":new r("7H"),"7S":new r("7S"),"7NT":new r("7NT")};o.pass=o["-"],o.double=o.X,o.redouble=o.XX,e.exports=o},{}],4:[function(t,e,n){"use strict";var r=e.exports={};r.card=t("./card"),r.bid=t("./bid"),r.seat=t("./seat"),r.Contract=t("./contract"),r.Trick=t("./trick"),r.Deck=t("./deck"),r.Hand=t("./hand"),r.Auction=t("./auction")},{"./auction":2,"./bid":3,"./card":5,"./contract":6,"./deck":7,"./hand":8,"./seat":9,"./trick":10}],5:[function(t,e,n){"use strict";function r(t,e){this.rank=t,this.suit=e,this.order=i[this.rank]+o[this.suit]}var i={2:1,3:2,4:3,5:4,6:5,7:6,8:7,9:8,10:9,J:10,Q:11,K:12,A:13},o={C:0,D:13,H:26,S:39};r.prototype.toString=function(){return this.rank+this.suit},r.prototype.imageUrl=function(){return"cards/"+this.rank+this.suit+".svg"};var s={all:[]};for(var a in i)for(var h in o){var u=new r(a,h);s.all.push(u),s[a+h]=u,s[h+a]=u,"10"===a&&(s["T"+h]=u,s[h+"T"]=u)}e.exports=s},{}],6:[function(t,e,n){"use strict";function r(){this.risk="",this.level=0,this.denomination=void 0,this.declaror=void 0}r.prototype.toString=function(){return this.isPassedIn()?"-":this.level+this.denomination+this.risk+" by "+this.declaror.symbol},r.prototype.isPassedIn=function(){return 0===this.level},e.exports=r},{}],7:[function(t,e,n){"use strict";function r(){this.cards=i.all.slice()}var i=t("./card"),o=t("./seat"),s=t("./hand");r.prototype.shuffle=function(t){t=t||Math.random;for(var e,n,r=this.cards,i=r.length;i>1;)e=Math.floor(t()*i--),n=r[i],r[i]=r[e],r[e]=n;return this},r.prototype.deal=function(t){var e=t,n={};n[o.north]=new s,n[o.south]=new s,n[o.east]=new s,n[o.west]=new s;for(var r=0;r<this.cards.length;++r)e=e.next,n[e].cards.push(this.cards[r]);return n[o.north].sort(),n[o.south].sort(),n[o.east].sort(),n[o.west].sort(),n},e.exports=r},{"./card":5,"./hand":8,"./seat":9}],8:[function(t,e,n){"use strict";function r(){this.cards=[],this.facts=[]}r.prototype.sort=function(){return this.cards.sort(function(t,e){return e.order-t.order}),this},r.prototype.cardsWithSuit=function(t){return this.cards.filter(function(e){return e.suit===t})},r.prototype.toString=function(){var t,e="";for(t=0;t<this.cards.length;++t)0!==t&&(e+=" "),e+=this.cards[t].toString();return e},e.exports=r},{}],9:[function(t,e,n){"use strict";function r(){this.symbol=""}r.prototype.toString=function(){return this.name};var i={north:new r,east:new r,south:new r,west:new r};i.north.symbol="N",i.north.name="north",i.north.partner=i.south,i.north.rho=i.west,i.north.lho=i.east,i.north.next=i.east,i.south.symbol="S",i.south.name="south",i.south.partner=i.north,i.south.rho=i.east,i.south.lho=i.west,i.south.next=i.west,i.east.symbol="E",i.east.name="east",i.east.partner=i.west,i.east.rho=i.north,i.east.lho=i.south,i.east.next=i.south,i.west.symbol="W",i.west.name="west",i.west.partner=i.east,i.west.rho=i.south,i.west.lho=i.north,i.west.next=i.north,i.N=i.north,i.S=i.south,i.E=i.east,i.W=i.west,e.exports=i},{}],10:[function(t,e,n){"use strict";function r(){this.play=[]}r.prototype.leader=function(){return this.play.length<1?void 0:this.play[0].seat},r.prototype.winner=function(t){if(!(this.play.length<4)){for(var e,n,r,i=-1e4,o=0;o<4;++o)e=this.play[o],r=e.card.order,e.card.suit===t.denomination&&(r*=1e3),r>i&&(i=r,n=e.seat);return n}},e.exports=r},{}]},{},[1])(1)});
